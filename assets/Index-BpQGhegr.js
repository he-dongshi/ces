import{d as G,o as H,m as J,r as u,A as _,a as s,z as K,c as w,b,e as y,g as l,h as a,B as O,k as i,j as L,F as h,i as Q,D as W,t as X,y as Y,_ as Z}from"./index-BUVdxLJQ.js";const ee={class:"page p10"},le={class:"between mb10"},te={class:"actions"},ae=G({__name:"Index",setup(oe){H(()=>{d(),I()});const p=J({page:1,limit:15,username:""}),x=u(0),g=u(!1),C=u([]),d=()=>{g.value=!0,_.brokerList(p).then(n=>{C.value=n.data,x.value=n.total,g.value=!1})},U=u([]),I=()=>{_.roleList({page:1,limit:9999}).then(n=>{U.value=n.data})},c=u(!1),k=u(""),o=u({}),N=n=>{_.brokerInfo(n).then(e=>{o.value=e.data})},B=n=>{k.value=n?"修改经纪人":"新增经纪人",n?N(n.id):o.value={username:"",nickname:"",mobile:"",password:"",remark:"",status:"",roles:[]},c.value=!0},z=()=>{k.value=="新增经纪人"?_.brokerAdd(o.value).then(()=>{d(),c.value=!1}):_.brokerEdit(o.value.id,o.value).then(()=>{d(),c.value=!1})},A=n=>{Y.confirm("确定删除这个经纪人吗").then(()=>{_.brokerDel(n.id).then(()=>{d()})})};return(n,e)=>{const m=s("el-button"),v=s("el-input"),E=s("el-col"),$=s("el-row"),r=s("el-table-column"),j=s("el-divider"),F=s("el-table"),M=s("el-pagination"),S=s("el-card"),f=s("el-form-item"),T=s("el-tree-select"),P=s("el-form"),R=s("el-dialog"),q=K("loading");return b(),w(h,null,[y("div",ee,[l(S,{shadow:"never"},{default:a(()=>[y("div",le,[y("div",te,[l(m,{type:"primary",onClick:e[0]||(e[0]=t=>B(null))},{default:a(()=>e[9]||(e[9]=[i("新增")])),_:1}),l(m,{onClick:d},{default:a(()=>e[10]||(e[10]=[i("刷新")])),_:1})]),l($,{gutter:20},{default:a(()=>[l(E,{class:"mb10",xs:24,sm:8,md:6,lg:4,xl:3},{default:a(()=>[l(v,{class:"ml10",placeholder:"经纪人姓名",modelValue:p.username,"onUpdate:modelValue":e[1]||(e[1]=t=>p.username=t)},{append:a(()=>[l(m,{onClick:d},{default:a(()=>e[11]||(e[11]=[i("搜索")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),O((b(),L(F,{data:C.value,border:"",stripe:""},{default:a(()=>[l(r,{label:"序号",type:"index",width:"55"}),l(r,{label:"真实姓名",prop:"username",width:"170"}),l(r,{label:"绑定手机号",prop:"mobile",width:"170"}),l(r,{label:"角色"},{default:a(({row:t})=>[(b(!0),w(h,null,Q(t.roles,(V,D)=>(b(),w("span",{key:D},[i(X(V.role_name)+" ",1),D<t.roles.length-1?(b(),L(j,{key:0,direction:"vertical"})):W("",!0)]))),128))]),_:1}),l(r,{label:"创建时间",prop:"created_at",width:"170"}),l(r,{label:"修改时间",prop:"updated_at",width:"170"}),l(r,{label:"操作",fixed:"right",width:"160"},{default:a(({row:t})=>[l(m,{type:"primary",link:"",onClick:V=>B(t)},{default:a(()=>e[12]||(e[12]=[i("修改")])),_:2},1032,["onClick"]),l(m,{type:"danger",link:"",onClick:V=>A(t)},{default:a(()=>e[13]||(e[13]=[i("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[q,g.value]]),l(M,{class:"mt10",background:"",layout:"prev, pager, next,->,total,jumper","current-page":p.page,"onUpdate:currentPage":e[2]||(e[2]=t=>p.page=t),"page-size":p.limit,total:x.value,onCurrentChange:d},null,8,["current-page","page-size","total"])]),_:1})]),l(R,{title:k.value,modelValue:c.value,"onUpdate:modelValue":e[8]||(e[8]=t=>c.value=t),width:"600px"},{footer:a(()=>[l(m,{type:"primary",onClick:z},{default:a(()=>e[14]||(e[14]=[i("提交")])),_:1})]),default:a(()=>[l(P,{class:"p10","label-width":"100px"},{default:a(()=>[l(f,{label:"管理员姓名"},{default:a(()=>[l(v,{modelValue:o.value.username,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.username=t),placeholder:"请输入管理员姓名"},null,8,["modelValue"])]),_:1}),l(f,{label:"绑定手机"},{default:a(()=>[l(v,{modelValue:o.value.mobile,"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.mobile=t),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),l(f,{label:"密码"},{default:a(()=>[l(v,{type:"password",modelValue:o.value.password,"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.password=t),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),l(f,{label:"简介备注"},{default:a(()=>[l(v,{type:"textarea",modelValue:o.value.remark,"onUpdate:modelValue":e[6]||(e[6]=t=>o.value.remark=t),placeholder:"请输入..."},null,8,["modelValue"])]),_:1}),l(f,{label:"角色"},{default:a(()=>[l(T,{modelValue:o.value.roles,"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.roles=t),data:U.value,"node-key":"id",props:{label:"role_name",value:"id"},multiple:"","show-checkbox":"",checkStrictly:"",label:"permission_name"},null,8,["modelValue","data"])]),_:1})]),_:1})]),_:1},8,["title","modelValue"])],64)}}}),se=Z(ae,[["__scopeId","data-v-1d3c3c1b"]]);export{se as default};
