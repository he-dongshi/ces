import{d as y,H as C,u as U,o as B,r as m,a as s,j as E,b as h,h as a,g as l,s as v,k as c,E as A,A as M,y as S}from"./index-BUVdxLJQ.js";const N=y({__name:"Index",setup(z){const i=C(),f=U();B(()=>{o.value={...i.userInfo}});const o=m({}),u=m(""),p=m(""),b=n=>{o.value.avatar=n.data.path},V=()=>{u.value&&(u.value!=p.value?A.error("两次密码输入不一致"):o.value.password=u.value),M.userEdit(o.value).then(n=>{n&&n.code==1e4&&S.alert("个人信息已经更改，请重新登录",{callback:()=>{f.replace("/login")}})})};return(n,e)=>{const w=s("el-avatar"),k=s("el-upload"),r=s("el-form-item"),d=s("el-input"),x=s("el-form"),_=s("el-button"),g=s("el-card");return h(),E(g,null,{footer:a(()=>[l(_,{type:"primary",onClick:V},{default:a(()=>e[5]||(e[5]=[c("提交")])),_:1}),l(_,{onClick:e[4]||(e[4]=t=>v(f).back())},{default:a(()=>e[6]||(e[6]=[c("返回")])),_:1})]),default:a(()=>[l(x,{"label-width":"90px",style:{width:"400px"}},{default:a(()=>[l(r,{label:"头像："},{default:a(()=>[l(k,{"show-file-list":!1,action:"https://bhfy.n.su8.shop/api/upload/image",name:"image",headers:{Authorization:"Bearer "+v(i).token},"on-success":b},{default:a(()=>[l(w,{size:"large",src:o.value.avatar},null,8,["src"])]),_:1},8,["headers"])]),_:1}),l(r,{label:"用户名："},{default:a(()=>[l(d,{disabled:"",modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.username=t)},null,8,["modelValue"])]),_:1}),l(r,{label:"手机号："},{default:a(()=>[l(d,{modelValue:o.value.mobile,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.mobile=t),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),l(r,{label:"密码："},{default:a(()=>[l(d,{type:"password",modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=t=>u.value=t),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),l(r,{label:"确认密码："},{default:a(()=>[l(d,{type:"password",modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=t=>p.value=t),placeholder:"请再次确认密码"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})}}});export{N as default};
