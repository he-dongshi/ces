import{d as $,o as h,m as j,r as d,A as v,a as n,z,c as M,b as y,e as g,g as l,h as o,B as R,k as p,j as q,F as G,_ as H}from"./index-BUVdxLJQ.js";const J={class:"page p10"},K={class:"between mb10"},O={class:"actions"},P=$({__name:"Index",setup(Q){h(()=>{i(),U()});const f=j({role_name:""}),C=d(0),k=d([]),b=d(!1),i=()=>{b.value=!0,v.roleList(f).then(s=>{k.value=s.data,C.value=s.total,b.value=!1})},w=d([]),U=()=>{v.authList().then(s=>{w.value=s.data})},u=d(!1),V=d(""),t=d({}),x=s=>{V.value=s?"修改角色":"新增角色",t.value=s?{...s}:{role_name:"",identify:"",description:"",permissions:[]},s&&(t.value.permissions=t.value.permissions.map(e=>e.id)),u.value=!0},B=()=>{V.value=="新增角色"?v.roleAdd(t.value).then(()=>{i(),u.value=!1}):v.roleEdit(t.value.id,t.value).then(()=>{i(),u.value=!1})};return(s,e)=>{const r=n("el-button"),_=n("el-input"),L=n("el-col"),A=n("el-row"),m=n("el-table-column"),D=n("el-table"),I=n("el-card"),c=n("el-form-item"),N=n("el-tree-select"),E=n("el-form"),F=n("el-dialog"),T=z("loading");return y(),M(G,null,[g("div",J,[l(I,{shadow:"never"},{default:o(()=>[g("div",K,[g("div",O,[l(r,{type:"primary",onClick:e[0]||(e[0]=a=>x(null))},{default:o(()=>e[7]||(e[7]=[p("新增")])),_:1}),l(r,{onClick:i},{default:o(()=>e[8]||(e[8]=[p("刷新")])),_:1})]),l(A,{gutter:20},{default:o(()=>[l(L,{class:"mb10",xs:24,sm:8,md:6,lg:4,xl:3},{default:o(()=>[l(_,{class:"ml10",placeholder:"角色名称",modelValue:f.role_name,"onUpdate:modelValue":e[1]||(e[1]=a=>f.role_name=a)},{append:o(()=>[l(r,{onClick:i},{default:o(()=>e[9]||(e[9]=[p("搜索")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),R((y(),q(D,{data:k.value,border:"",stripe:""},{default:o(()=>[l(m,{label:"角色名称",prop:"role_name"}),l(m,{label:"角色标识",prop:"identify",width:"170"}),l(m,{label:"角色描述",prop:"description",width:"170"}),l(m,{label:"创建时间",prop:"created_at"}),l(m,{label:"操作",width:"160"},{default:o(({row:a})=>[l(r,{type:"primary",link:"",onClick:S=>x(a)},{default:o(()=>e[10]||(e[10]=[p("修改")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,b.value]])]),_:1})]),l(F,{title:V.value,modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=a=>u.value=a),width:"600px"},{footer:o(()=>[l(r,{type:"primary",onClick:B},{default:o(()=>e[11]||(e[11]=[p("提交")])),_:1})]),default:o(()=>[l(E,{class:"p10","label-width":"100px"},{default:o(()=>[l(c,{label:"角色名称"},{default:o(()=>[l(_,{modelValue:t.value.role_name,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.role_name=a),placeholder:"请输入角色名称"},null,8,["modelValue"])]),_:1}),l(c,{label:"角色标识"},{default:o(()=>[l(_,{modelValue:t.value.identify,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.identify=a),placeholder:"请输入角色标识"},null,8,["modelValue"])]),_:1}),l(c,{label:"角色描述"},{default:o(()=>[l(_,{type:"textarea",modelValue:t.value.description,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.description=a),placeholder:"请输入..."},null,8,["modelValue"])]),_:1}),l(c,{label:"角色权限"},{default:o(()=>[l(N,{modelValue:t.value.permissions,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.permissions=a),data:w.value,"node-key":"id",props:{label:"permission_name",value:"id"},multiple:"","show-checkbox":"",label:"permission_name"},null,8,["modelValue","data"])]),_:1})]),_:1})]),_:1},8,["title","modelValue"])],64)}}}),X=H(P,[["__scopeId","data-v-69b18cc1"]]);export{X as default};
